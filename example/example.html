<html>

<head>
    <meta charset="utf-8">

    
    <!-- In-line mode: inline utils.js and use CDN for pyvis libraries -->
    <script>function neighbourhoodHighlight(params) {
  // console.log("in nieghbourhoodhighlight");
  allNodes = nodes.get({ returnType: "Object" });
  // originalNodes = JSON.parse(JSON.stringify(allNodes));
  // if something is selected:
  if (params.nodes.length > 0) {
    highlightActive = true;
    var i, j;
    var selectedNode = params.nodes[0];
    var degrees = 2;

    // mark all nodes as hard to read.
    for (let nodeId in allNodes) {
      // nodeColors[nodeId] = allNodes[nodeId].color;
      allNodes[nodeId].color = "rgba(200,200,200,0.5)";
      if (allNodes[nodeId].hiddenLabel === undefined) {
        allNodes[nodeId].hiddenLabel = allNodes[nodeId].label;
        allNodes[nodeId].label = undefined;
      }
    }
    var connectedNodes = network.getConnectedNodes(selectedNode);
    var allConnectedNodes = [];

    // get the second degree nodes
    for (i = 1; i < degrees; i++) {
      for (j = 0; j < connectedNodes.length; j++) {
        allConnectedNodes = allConnectedNodes.concat(
          network.getConnectedNodes(connectedNodes[j])
        );
      }
    }

    // all second degree nodes get a different color and their label back
    for (i = 0; i < allConnectedNodes.length; i++) {
      // allNodes[allConnectedNodes[i]].color = "pink";
      allNodes[allConnectedNodes[i]].color = "rgba(150,150,150,0.75)";
      if (allNodes[allConnectedNodes[i]].hiddenLabel !== undefined) {
        allNodes[allConnectedNodes[i]].label =
          allNodes[allConnectedNodes[i]].hiddenLabel;
        allNodes[allConnectedNodes[i]].hiddenLabel = undefined;
      }
    }

    // all first degree nodes get their own color and their label back
    for (i = 0; i < connectedNodes.length; i++) {
      // allNodes[connectedNodes[i]].color = undefined;
      allNodes[connectedNodes[i]].color = nodeColors[connectedNodes[i]];
      if (allNodes[connectedNodes[i]].hiddenLabel !== undefined) {
        allNodes[connectedNodes[i]].label =
          allNodes[connectedNodes[i]].hiddenLabel;
        allNodes[connectedNodes[i]].hiddenLabel = undefined;
      }
    }

    // the main node gets its own color and its label back.
    // allNodes[selectedNode].color = undefined;
    allNodes[selectedNode].color = nodeColors[selectedNode];
    if (allNodes[selectedNode].hiddenLabel !== undefined) {
      allNodes[selectedNode].label = allNodes[selectedNode].hiddenLabel;
      allNodes[selectedNode].hiddenLabel = undefined;
    }
  } else if (highlightActive === true) {
    // console.log("highlightActive was true");
    // reset all nodes
    for (let nodeId in allNodes) {
      // allNodes[nodeId].color = "purple";
      allNodes[nodeId].color = nodeColors[nodeId];
      // delete allNodes[nodeId].color;
      if (allNodes[nodeId].hiddenLabel !== undefined) {
        allNodes[nodeId].label = allNodes[nodeId].hiddenLabel;
        allNodes[nodeId].hiddenLabel = undefined;
      }
    }
    highlightActive = false;
  }

  // transform the object into an array
  var updateArray = [];
  if (params.nodes.length > 0) {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        // console.log(allNodes[nodeId]);
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  } else {
    // console.log("Nothing was selected");
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        // console.log(allNodes[nodeId]);
        // allNodes[nodeId].color = {};
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  }
}

function filterHighlight(params) {
  allNodes = nodes.get({ returnType: "Object" });
  // if something is selected:
  if (params.nodes.length > 0) {
    filterActive = true;
    let selectedNodes = params.nodes;

    // hiding all nodes and saving the label
    for (let nodeId in allNodes) {
      allNodes[nodeId].hidden = true;
      if (allNodes[nodeId].savedLabel === undefined) {
        allNodes[nodeId].savedLabel = allNodes[nodeId].label;
        allNodes[nodeId].label = undefined;
      }
    }

    for (let i=0; i < selectedNodes.length; i++) {
      allNodes[selectedNodes[i]].hidden = false;
      if (allNodes[selectedNodes[i]].savedLabel !== undefined) {
        allNodes[selectedNodes[i]].label = allNodes[selectedNodes[i]].savedLabel;
        allNodes[selectedNodes[i]].savedLabel = undefined;
      }
    }

  } else if (filterActive === true) {
    // reset all nodes
    for (let nodeId in allNodes) {
      allNodes[nodeId].hidden = false;
      if (allNodes[nodeId].savedLabel !== undefined) {
        allNodes[nodeId].label = allNodes[nodeId].savedLabel;
        allNodes[nodeId].savedLabel = undefined;
      }
    }
    filterActive = false;
  }

  // transform the object into an array
  var updateArray = [];
  if (params.nodes.length > 0) {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  } else {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  }
}

function selectNode(nodes) {
  network.selectNodes(nodes);
  neighbourhoodHighlight({ nodes: nodes });
  return nodes;
}

function selectNodes(nodes) {
  network.selectNodes(nodes);
  filterHighlight({nodes: nodes});
  return nodes;
}

function highlightFilter(filter) {
  let selectedNodes = []
  let selectedProp = filter['property']
  if (filter['item'] === 'node') {
    let allNodes = nodes.get({ returnType: "Object" });
    for (let nodeId in allNodes) {
      if (allNodes[nodeId][selectedProp] && filter['value'].includes((allNodes[nodeId][selectedProp]).toString())) {
        selectedNodes.push(nodeId)
      }
    }
  }
  else if (filter['item'] === 'edge'){
    let allEdges = edges.get({returnType: 'object'});
    // check if the selected property exists for selected edge and select the nodes connected to the edge
    for (let edge in allEdges) {
      if (allEdges[edge][selectedProp] && filter['value'].includes((allEdges[edge][selectedProp]).toString())) {
        selectedNodes.push(allEdges[edge]['from'])
        selectedNodes.push(allEdges[edge]['to'])
      }
    }
  }
  selectNodes(selectedNodes)
}</script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css"
        integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js"
        integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    

    <center>
        <h1>Example</h1>
    </center>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>

    <style type="text/css">
        #mynetwork {
            width: 100%;
            height: 90vh;
            background-color: #ffffff;
            border: 1px solid lightgray;
            position: relative;
            float: left;
        }

        

        #bar {
            position: absolute;
            top: 0px;
            left: 0px;
            width: 20px;
            height: 20px;
            margin: auto auto auto auto;
            border-radius: 11px;
            border: 2px solid rgba(30, 30, 30, 0.05);
            background: rgb(0, 173, 246);
            /* Old browsers */
            box-shadow: 2px 0px 4px rgba(0, 0, 0, 0.4);
        }

        #border {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 500px;
            height: 23px;
            margin: auto auto auto auto;
            box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        #text {
            position: absolute;
            top: 8px;
            left: 530px;
            width: 30px;
            height: 50px;
            margin: auto auto auto auto;
            font-size: 22px;
            color: #000000;
        }

        div.outerBorder {
            position: relative;
            top: 400px;
            width: 600px;
            height: 44px;
            margin: auto auto auto auto;
            border: 8px solid rgba(0, 0, 0, 0.1);
            background: rgb(252, 252, 252);
            /* Old browsers */
            background: -moz-linear-gradient(top, rgba(252, 252, 252, 1) 0%, rgba(237, 237, 237, 1) 100%);
            /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(252, 252, 252, 1)), color-stop(100%, rgba(237, 237, 237, 1)));
            /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, rgba(252, 252, 252, 1) 0%, rgba(237, 237, 237, 1) 100%);
            /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top, rgba(252, 252, 252, 1) 0%, rgba(237, 237, 237, 1) 100%);
            /* Opera 11.10+ */
            background: -ms-linear-gradient(top, rgba(252, 252, 252, 1) 0%, rgba(237, 237, 237, 1) 100%);
            /* IE10+ */
            background: linear-gradient(to bottom, rgba(252, 252, 252, 1) 0%, rgba(237, 237, 237, 1) 100%);
            /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#ededed', GradientType=0);
            /* IE6-9 */
            border-radius: 72px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        }

            {
            % endif %
        }

            {
            % if conf %
        }

        #config {
            float: left;
            width: 400px;
            height: 600px;
        }

            {
            % endif %
        }

            {
            % if tooltip_link %
        }

        /* position absolute is important and the container has to be relative or absolute as well. */
        div.popup {
            position: absolute;
            top: 0px;
            left: 0px;
            display: none;
            background-color: #f5f4ed;
            -moz-border-radius: 3px;
            -webkit-border-radius: 3px;
            border-radius: 3px;
            border: 1px solid #808074;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
        }

        /* hide the original tooltip */
        .vis-tooltip {
            display: none;
        }

            {
            % endif %
        }
    </style>
</head>


<body>
    <div class="card" style="width: 100%">
        
        
        <div id="mynetwork" class="card-body"></div>
    </div>

    
    
    <div id="config"></div>
    

    <script type="text/javascript">

        // initialize global variables.
        var edges;
        var nodes;
        var allNodes;
        var allEdges;
        var nodeColors;
        var originalNodes;
        var network;
        var container;
        var options, data;
        var filter = {
            item: '',
            property: '',
            value: []
        };

        

        

        // This method is responsible for drawing the graph, returns the drawn network
        function drawGraph() {
            var container = document.getElementById('mynetwork');

            

            // parsing and collecting nodes and edges from the python
            nodes = new vis.DataSet([{"color": "#97c2fc", "font": {"size": 40}, "id": "Approval", "label": "Approval", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Approval"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Branch1", "label": "Branch1", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Branch1"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Branch2", "label": "Branch2", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Branch2"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Butterfly", "label": "Butterfly", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Butterfly"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Caterpillar", "label": "Caterpillar", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Caterpillar"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Chrysalis", "label": "Chrysalis", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Chrysalis"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Draft", "label": "Draft", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Draft"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Eggs", "label": "Eggs", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Eggs"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Flour", "label": "Flour", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Flour"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Flower", "label": "Flower", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Flower"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Left", "label": "Left", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Left"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Milk", "label": "Milk", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Milk"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "North", "label": "North", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "North"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Pancake Batter", "label": "Pancake Batter", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Pancake Batter"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Plant", "label": "Plant", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Plant"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Publication", "label": "Publication", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Publication"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Review", "label": "Review", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Review"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Right", "label": "Right", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Right"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Salt", "label": "Salt", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Salt"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Saltwater", "label": "Saltwater", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Saltwater"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Seed", "label": "Seed", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Seed"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "South", "label": "South", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "South"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Sprout", "label": "Sprout", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Sprout"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Tree", "label": "Tree", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Tree"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "W", "label": "W", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "W"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Water", "label": "Water", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Water"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "X", "label": "X", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "X"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Y", "label": "Y", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Y"}, {"color": "#97c2fc", "font": {"size": 40}, "id": "Z", "label": "Z", "shape": "circle", "shapeProperties": {"useBorderWithImage": true}, "title": "Z"}]);
        edges = new vis.DataSet([{"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Caterpillar", "title": "Evolution", "to": "Chrysalis", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Chrysalis", "title": "Evolution", "to": "Butterfly", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Seed", "title": "Evolution", "to": "Sprout", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Sprout", "title": "Evolution", "to": "Plant", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Plant", "title": "Evolution", "to": "Flower", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Draft", "title": "Process Steps", "to": "Review", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Review", "title": "Process Steps", "to": "Approval", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "orange", "from": "Approval", "title": "Process Steps", "to": "Publication", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "color": "green", "from": "Left", "smooth": false, "title": "parallel", "to": "Right", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "color": "green", "from": "North", "smooth": false, "title": "parallel", "to": "South", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "purple", "from": "Salt", "smooth": true, "title": "convergence", "to": "Saltwater", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "purple", "from": "Water", "smooth": true, "title": "convergence", "to": "Saltwater", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "purple", "from": "Flour", "smooth": true, "title": "convergence", "to": "Pancake Batter", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "purple", "from": "Eggs", "smooth": true, "title": "convergence", "to": "Pancake Batter", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "purple", "from": "Milk", "smooth": true, "title": "convergence", "to": "Pancake Batter", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "red", "from": "Tree", "title": "Branches", "to": "Branch1", "width": 15}, {"arrowStrikethrough": false, "arrows": "to", "color": "red", "from": "Tree", "title": "Branches", "to": "Branch2", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "closed": "complete", "from": "W", "title": "Letters", "to": "X", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "closed": "complete", "from": "W", "title": "Letters", "to": "Y", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "closed": "complete", "from": "W", "title": "Letters", "to": "Z", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "closed": "complete", "from": "X", "title": "Letters", "to": "Y", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "closed": "complete", "from": "X", "title": "Letters", "to": "Z", "width": 15}, {"arrowStrikethrough": false, "arrows": "none", "closed": "complete", "from": "Y", "title": "Letters", "to": "Z", "width": 15}]);

        nodeColors = {};
        allNodes = nodes.get({ returnType: "Object" });
        for (nodeId in allNodes) {
            nodeColors[nodeId] = allNodes[nodeId].color;
        }
        allEdges = edges.get({ returnType: "Object" });
        // adding nodes and edges to the graph
        data = { nodes: nodes, edges: edges };

        var options = {
    "configure": {
        "enabled": true,
        "filter": true
    },
    "edges": {
        "color": {
            "inherit": true
        },
        "smooth": {
            "enabled": true,
            "type": "dynamic"
        }
    },
    "interaction": {
        "dragNodes": true,
        "hideEdgesOnDrag": false,
        "hideNodesOnDrag": false,
        "navigationButtons": true
    },
    "physics": {
        "enabled": true,
        "repulsion": {
            "centralGravity": 0.2,
            "damping": 0.5,
            "nodeDistance": 1000,
            "springConstant": 0.015,
            "springLength": 200
        },
        "solver": "repulsion",
        "stabilization": {
            "enabled": true,
            "fit": true,
            "iterations": 1000,
            "onlyDynamicEdges": false,
            "updateInterval": 50
        }
    }
};

        


        
        // if this network requires displaying the configure window,
        // put it in its div
        options.configure["container"] = document.getElementById("config");
        

        network = new vis.Network(container, data, options);

        

        

        


        

        return network;

              }
        drawGraph();
    </script>
</body>

</html>